{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.currentPoints = currentPoints;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nfunction retrievePointsPrev(api, currentElected) {\n  return api.query.staking.currentEraPointsEarned().pipe((0, _operators.map)(function (_ref) {\n    var individual = _ref.individual,\n        total = _ref.total;\n    return api.registry.createType('EraRewardPoints', {\n      individual: new Map(individual.map(function (points) {\n        return api.registry.createType('RewardPoint', points);\n      }).map(function (points, index) {\n        return [currentElected[index], points];\n      })),\n      total: total\n    });\n  }));\n}\n/**\n * @description Retrieve the staking overview, including elected and points earned\n */\n\n\nfunction currentPoints(instanceId, api) {\n  return (0, _util.memo)(instanceId, function () {\n    return api.derive.staking.overview().pipe((0, _operators.switchMap)(function (_ref2) {\n      var activeEra = _ref2.activeEra,\n          nextElected = _ref2.nextElected;\n      return api.query.staking.erasRewardPoints ? api.query.staking.erasRewardPoints(activeEra) : api.query.staking.currentEraPointsEarned ? retrievePointsPrev(api, nextElected) : (0, _rxjs.of)(api.registry.createType('EraRewardPoints'));\n    }));\n  });\n}","map":{"version":3,"sources":["/mnt/c/Users/PC/Documents/PolkadotHelloWorld/PolkadotHelloWorld/Front-End-Project/substrate-node-template/substrate-front-end-template/node_modules/@polkadot/api-derive/staking/currentPoints.js"],"names":["Object","defineProperty","exports","value","currentPoints","_rxjs","require","_operators","_util","retrievePointsPrev","api","currentElected","query","staking","currentEraPointsEarned","pipe","map","individual","total","registry","createType","Map","points","index","instanceId","memo","derive","overview","switchMap","activeEra","nextElected","erasRewardPoints","of"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,aAAR,GAAwBA,aAAxB;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AAEA,IAAIC,UAAU,GAAGD,OAAO,CAAC,gBAAD,CAAxB;;AAEA,IAAIE,KAAK,GAAGF,OAAO,CAAC,SAAD,CAAnB,C,CAEA;AACA;;;AACA,SAASG,kBAAT,CAA4BC,GAA5B,EAAiCC,cAAjC,EAAiD;AAC/C,SAAOD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBC,sBAAlB,GAA2CC,IAA3C,CAAgD,CAAC,GAAGR,UAAU,CAACS,GAAf,EAAoB;AAAA,QACzEC,UADyE,QACzEA,UADyE;AAAA,QAEzEC,KAFyE,QAEzEA,KAFyE;AAAA,WAGrER,GAAG,CAACS,QAAJ,CAAaC,UAAb,CAAwB,iBAAxB,EAA2C;AAC/CH,MAAAA,UAAU,EAAE,IAAII,GAAJ,CAAQJ,UAAU,CAACD,GAAX,CAAe,UAAAM,MAAM;AAAA,eAAIZ,GAAG,CAACS,QAAJ,CAAaC,UAAb,CAAwB,aAAxB,EAAuCE,MAAvC,CAAJ;AAAA,OAArB,EAAyEN,GAAzE,CAA6E,UAACM,MAAD,EAASC,KAAT;AAAA,eAAmB,CAACZ,cAAc,CAACY,KAAD,CAAf,EAAwBD,MAAxB,CAAnB;AAAA,OAA7E,CAAR,CADmC;AAE/CJ,MAAAA,KAAK,EAALA;AAF+C,KAA3C,CAHqE;AAAA,GAApB,CAAhD,CAAP;AAOD;AACD;AACA;AACA;;;AAGA,SAASd,aAAT,CAAuBoB,UAAvB,EAAmCd,GAAnC,EAAwC;AACtC,SAAO,CAAC,GAAGF,KAAK,CAACiB,IAAV,EAAgBD,UAAhB,EAA4B;AAAA,WAAMd,GAAG,CAACgB,MAAJ,CAAWb,OAAX,CAAmBc,QAAnB,GAA8BZ,IAA9B,CAAmC,CAAC,GAAGR,UAAU,CAACqB,SAAf,EAA0B;AAAA,UACpGC,SADoG,SACpGA,SADoG;AAAA,UAEpGC,WAFoG,SAEpGA,WAFoG;AAAA,aAGhGpB,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBkB,gBAAlB,GAAqCrB,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBkB,gBAAlB,CAAmCF,SAAnC,CAArC,GAAqFnB,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBC,sBAAlB,GAA2CL,kBAAkB,CAACC,GAAD,EAAMoB,WAAN,CAA7D,GAAkF,CAAC,GAAGzB,KAAK,CAAC2B,EAAV,EAActB,GAAG,CAACS,QAAJ,CAAaC,UAAb,CAAwB,iBAAxB,CAAd,CAHvE;AAAA,KAA1B,CAAnC,CAAN;AAAA,GAA5B,CAAP;AAID","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.currentPoints = currentPoints;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"../util\");\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nfunction retrievePointsPrev(api, currentElected) {\n  return api.query.staking.currentEraPointsEarned().pipe((0, _operators.map)(({\n    individual,\n    total\n  }) => api.registry.createType('EraRewardPoints', {\n    individual: new Map(individual.map(points => api.registry.createType('RewardPoint', points)).map((points, index) => [currentElected[index], points])),\n    total\n  })));\n}\n/**\n * @description Retrieve the staking overview, including elected and points earned\n */\n\n\nfunction currentPoints(instanceId, api) {\n  return (0, _util.memo)(instanceId, () => api.derive.staking.overview().pipe((0, _operators.switchMap)(({\n    activeEra,\n    nextElected\n  }) => api.query.staking.erasRewardPoints ? api.query.staking.erasRewardPoints(activeEra) : api.query.staking.currentEraPointsEarned ? retrievePointsPrev(api, nextElected) : (0, _rxjs.of)(api.registry.createType('EraRewardPoints')))));\n}"]},"metadata":{},"sourceType":"script"}